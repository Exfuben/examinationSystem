{"version":3,"sources":["webpack:///./src/views/Manager/UserManage/UserForm.vue?f461","webpack:///./src/views/Manager/UserManage/UserTabel.vue?0451","webpack:///./src/views/Manager/UserManage/UserTabel.vue","webpack:///./src/views/Manager/UserManage/UserTabel.vue?95e2","webpack:///./src/views/Manager/UserManage/UserForm.vue"],"names":["dialogFormVisible","ref","formLabelWidth","currentPage","pageSize","user","reactive","list","identity","props","name","sex","username","password","onMounted","getUserList","console","log","getTeacherList","getStudentList","axios","get","then","res","data","records","addUser","addTeacher","addStudent","ElMessage","success","post","push","value","delUser","id","index","delTeacher","delStudent","delete","splice","__exports__"],"mappings":"kHAAA,W,oCCAA,W,sZCyDMA,EAAoBC,kBAAI,GACxBC,EAAiB,OACjBC,EAAcF,iBAAI,GAClBG,EAAWH,iBAAI,IAOfI,EAAOC,sBAAS,CACpBC,KAAM,GACNC,SAAUC,EAAMD,SAChBH,KAAM,CACJK,KAAM,GACNC,IAAK,GACLC,SAAU,GACVC,SAAU,MAGdC,uBAAU,KACRC,EAAYV,EAAKG,UACjBQ,QAAQC,IAAIZ,KAEd,MAAMU,EAAeP,IACF,IAAbA,EACFU,IACsB,IAAbV,GACTW,KAGED,EAAiB,KACrBE,IAAMC,IAAI,qDACRC,KAAKC,IACLlB,EAAKE,KAAOgB,EAAIC,KAAKA,KAAKC,WAGxBN,EAAiB,KACrBC,IAAMC,IAAI,qDACRC,KAAKC,IACLlB,EAAKE,KAAOgB,EAAIC,KAAKA,KAAKC,WAOxBC,EAAU,KACQ,IAAlBrB,EAAKG,SACPmB,IAC2B,IAAlBtB,EAAKG,UACdoB,IAEFC,OAAUC,QAAQ,SAEdH,EAAa,KACjBP,IAAMW,KAAK,gCAAiC,CAC1CrB,KAAML,EAAKA,KAAKK,KAChBC,IAAKN,EAAKA,KAAKM,IACfC,SAAUP,EAAKA,KAAKO,SACpBC,SAAUR,EAAKA,KAAKQ,WACnBS,KAAKC,IACNP,QAAQC,IAAIM,GACZlB,EAAKE,KAAKyB,KAAKT,EAAIC,KAAKA,MACxBxB,EAAkBiC,OAAQ,KAGxBL,EAAa,KACjBR,IAAMW,KAAK,gCAAiC,CAC1CrB,KAAML,EAAKA,KAAKK,KAChBC,IAAKN,EAAKA,KAAKM,IACfC,SAAUP,EAAKA,KAAKO,SACpBC,SAAUR,EAAKA,KAAKQ,WACnBS,KAAKC,IACNP,QAAQC,IAAIM,GACZlB,EAAKE,KAAKyB,KAAKT,EAAIC,KAAKA,MACxBxB,EAAkBiC,OAAQ,KAGxBC,EAAU,CAACC,EAAIC,KACG,IAAlB/B,EAAKG,SACP6B,EAAWF,EAAIC,GACY,IAAlB/B,EAAKG,UACd8B,EAAWH,EAAIC,GAEjBpB,QAAQC,IAAIkB,EAAIC,GAChBP,OAAUC,QAAQ,SAEdO,EAAa,CAACF,EAAIC,KACtBhB,IAAMmB,OAAQ,gCAA+BJ,GAC3Cb,KAAKC,IACLP,QAAQC,IAAIM,GACZlB,EAAKE,KAAKiC,QAAQrC,EAAY8B,MAAQ,GAAK7B,EAAS6B,MAAQG,EAAO,MAGjEE,EAAa,CAACH,EAAIC,KACtBhB,IAAMmB,OAAQ,gCAA+BJ,GAC3Cb,KAAKC,IACLP,QAAQC,IAAIM,GACZlB,EAAKE,KAAKiC,QAAQrC,EAAY8B,MAAQ,GAAK7B,EAAS6B,MAAQG,EAAO,M,+vGCtJvE,MAAMK,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,Q,+hBCFf,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD","file":"js/chunk-6d9ba653.8b6c1129.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserForm.vue?vue&type=style&index=0&id=0845d694&lang=less&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserTabel.vue?vue&type=style&index=0&id=4abf09c1&lang=less&scoped=true\"","<template>\r\n  <el-table :data=\"user.list.slice((currentPage-1) * pageSize, currentPage * pageSize)\" stripe style=\"width: 100%\">\r\n    <el-table-column prop=\"name\" label=\"姓名\" width=\"180\" />\r\n    <el-table-column prop=\"username\" label=\"用户名\" width=\"180\" />\r\n    <el-table-column prop=\"password\" label=\"密码\" />\r\n    <el-table-column label=\"操作\">\r\n      <template #default=\"scope\">\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"danger\"\r\n          @click=\"delUser(scope.row.id, scope.$index)\"\r\n          >删除</el-button\r\n        >\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n  <el-pagination\r\n    v-model:currentPage=\"currentPage\"\r\n    v-model:page-size=\"pageSize\"\r\n    layout=\"prev, pager, next\"\r\n    :total=\"user.list.length\"\r\n  />\r\n  <el-button class=\"mt-4\" style=\"width: 100%\" @click=\"dialogFormVisible = true\"\r\n    >添加用户</el-button\r\n  >\r\n  <el-dialog v-model=\"dialogFormVisible\" :title=\"`${identity === 0 ? '添加教师' : '添加学生'}`\" width=\"30%\">\r\n    <el-form :model=\"user.user\">\r\n      <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"user.user.name\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"性别\" :label-width=\"formLabelWidth\">\r\n        <el-select v-model=\"user.user.sex\">\r\n          <el-option label=\"男\" value=\"0\" />\r\n          <el-option label=\"女\" value=\"1\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"user.user.username\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"user.user.password\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser()\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script setup>\r\nimport axios from 'axios'\r\nimport { onMounted, ref, reactive, defineProps } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nconst dialogFormVisible = ref(false)\r\nconst formLabelWidth = '80px'\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(10)\r\nconst props = defineProps({\r\n  identity: {\r\n    type: String,\r\n    default: '0'\r\n  }\r\n})\r\nconst user = reactive({\r\n  list: [],\r\n  identity: props.identity,\r\n  user: {\r\n    name: '',\r\n    sex: '',\r\n    username: '',\r\n    password: ''\r\n  }\r\n})\r\nonMounted(() => {\r\n  getUserList(user.identity)\r\n  console.log(user)\r\n})\r\nconst getUserList = (identity) => {\r\n  if (identity === 0) {\r\n    getTeacherList()\r\n  } else if (identity === 1) {\r\n    getStudentList()\r\n  }\r\n}\r\nconst getTeacherList = () => {\r\n  axios.get('http://localhost/teacher/page?page=1&pageSize=100'\r\n  ).then(res => {\r\n    user.list = res.data.data.records\r\n  })\r\n}\r\nconst getStudentList = () => {\r\n  axios.get('http://localhost/student/page?page=1&pageSize=100'\r\n  ).then(res => {\r\n    user.list = res.data.data.records\r\n  })\r\n}\r\n// const handleDelete = (id) => {\r\n//  tableData.value.splice(index, 1)\r\n//   console.log(id);\r\n// }\r\nconst addUser = () => {\r\n  if (user.identity === 0) {\r\n    addTeacher()\r\n  } else if (user.identity === 1) {\r\n    addStudent()\r\n  }\r\n  ElMessage.success('添加成功')\r\n}\r\nconst addTeacher = () => {\r\n  axios.post('http://localhost/teacher/save', {\r\n    name: user.user.name,\r\n    sex: user.user.sex,\r\n    username: user.user.username,\r\n    password: user.user.password\r\n  }).then(res => {\r\n    console.log(res)\r\n    user.list.push(res.data.data)\r\n    dialogFormVisible.value = false\r\n  })\r\n}\r\nconst addStudent = () => {\r\n  axios.post('http://localhost/student/save', {\r\n    name: user.user.name,\r\n    sex: user.user.sex,\r\n    username: user.user.username,\r\n    password: user.user.password\r\n  }).then(res => {\r\n    console.log(res)\r\n    user.list.push(res.data.data)\r\n    dialogFormVisible.value = false\r\n  })\r\n}\r\nconst delUser = (id, index) => {\r\n  if (user.identity === 0) {\r\n    delTeacher(id, index)\r\n  } else if (user.identity === 1) {\r\n    delStudent(id, index)\r\n  }\r\n  console.log(id, index)\r\n  ElMessage.success('删除成功')\r\n}\r\nconst delTeacher = (id, index) => {\r\n  axios.delete(`http://localhost/teacher?ids=${id}`\r\n  ).then(res => {\r\n    console.log(res)\r\n    user.list.splice((currentPage.value - 1) * pageSize.value + index, 1)\r\n  })\r\n}\r\nconst delStudent = (id, index) => {\r\n  axios.delete(`http://localhost/student?ids=${id}`\r\n  ).then(res => {\r\n    console.log(res)\r\n    user.list.splice((currentPage.value - 1) * pageSize.value + index, 1)\r\n  })\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n.el-select {\r\n  width: 300px;\r\n}\r\n.el-input {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import script from \"./UserTabel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserTabel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserTabel.vue?vue&type=style&index=0&id=4abf09c1&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML\\\\examination_system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4abf09c1\"]])\n\nexport default __exports__","import script from \"./UserForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserForm.vue?vue&type=style&index=0&id=0845d694&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML\\\\examination_system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0845d694\"]])\n\nexport default __exports__"],"sourceRoot":""}