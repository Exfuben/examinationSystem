{"version":3,"sources":["webpack:///./src/views/Teather/paperManage/paper.vue?8c9c","webpack:///./src/views/Teather/paperManage/paper.vue","webpack:///./src/views/Teather/paperManage/paper.vue?497c"],"names":["router","useRouter","route","useRoute","id","params","paper","reactive","studentId","localStorage","getItem","detail","answers","eachScore","onMounted","getPaperDetail","console","log","axios","get","then","res","data","getAnswer","content","getScore","split","str","arr","getDAnswer","index","slice","getColor","option","answer","subPaper","totalScore","forEach","e","parseInt","join","post","ElMessage","success","push","name","backPaper","__exports__"],"mappings":"uIAAA,W,6oBCsCA,MAAMA,EAASC,iBACTC,EAAQC,iBACRC,EAAKF,EAAMG,OAAOD,GAClBE,EAAQC,sBAAS,CACrBC,UAAWC,aAAaC,QAAQ,aAChCC,OAAQ,GACRC,QAAS,GACTC,UAAW,KAEbC,uBAAU,KACRC,EAAeX,GACfY,QAAQC,IAAIX,KAEd,MAAMS,EAAkBX,IACtBc,IAAMC,IAAK,uCAAsCf,GAC/CgB,KAAKC,IACLL,QAAQC,IAAII,EAAIC,MAChBhB,EAAMK,OAASU,EAAIC,KAAKA,KACxBC,EAAUF,EAAIC,KAAKA,KAAKE,SACxBC,EAASJ,EAAIC,KAAKA,KAAKT,cAGrBU,EAAaC,IACjBlB,EAAMM,QAAUY,EAAQE,MAAM,MAC9BV,QAAQC,IAAIX,EAAMM,UAEda,EAAYE,IAChB,MAAMC,EAAMD,EAAID,MAAM,KACtBpB,EAAMO,UAAYe,GAEdC,EAAcC,IAClB,MAAMH,EAAMrB,EAAMM,QAAQkB,GAAOC,MAAM,GACvC,OAAOJ,GAEHK,EAAW,CAACF,EAAOG,EAAQC,IAC3B5B,EAAMM,QAAQkB,KAAWG,EACvB3B,EAAMM,QAAQkB,KAAWI,EACpB,cAEA,YAGLD,IAAWC,EACN,cAEA,cAIPC,EAAY/B,IAChB,IAAIgC,EAAa,EACjB9B,EAAMO,UAAUwB,QAAQC,IACtBF,GAAcG,SAASD,KAEzB,MAAMX,EAAMrB,EAAMO,UAAU2B,KAAK,KACjCtB,IAAMuB,KAAK,qCAAsC,CAC/CrC,GAAIE,EAAMK,OAAOP,GACjBS,UAAWc,EACXS,WAAYA,IACXhB,KAAKC,IACNL,QAAQC,IAAII,GACZqB,OAAUC,QAAQ,QAClB3C,EAAO4C,KAAK,CACVC,KAAM,iBACNxC,OAAQ,CACND,GAAIA,QAKN0C,EAAa1C,IACjBJ,EAAO4C,KAAK,CACVC,KAAM,iBACNxC,OAAQ,CACND,GAAIA,M,4uEC1GV,MAAM2C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD","file":"js/chunk-06b4afdf.759f8401.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./paper.vue?vue&type=style&index=0&id=3d242a64&lang=less&scoped=true\"","<template>\r\n  <el-card class=\"box-card\">\r\n    <div class=\"card-header\">\r\n      <span class=\"paperTitle\">答卷评分</span>\r\n      <el-button class=\"button\" type=\"primary\" @click=\"backPaper(paper.detail.testPaperId)\">返回</el-button>\r\n    </div>\r\n    <div class=\"question\" v-for=\"(item, index) in paper.detail.paperQuestionDtoList\" :key=\"index\">\r\n      <div class=\"head\">\r\n        <span>{{ item.question.name }}</span>&nbsp;\r\n        <span>{{ `(分数:${ item.score })` }}</span>\r\n      </div>\r\n      <div class=\"content\">{{ item.question.content }}</div>\r\n      <div class=\"answer\">\r\n        <div class=\"showSelect\" v-if=\"item.question.type === 0\">\r\n          <span :class=\"getColor(index,'A',item.question.answer)\">A</span>\r\n          <span :class=\"getColor(index,'B',item.question.answer)\">B</span>\r\n          <span :class=\"getColor(index,'C',item.question.answer)\">C</span>\r\n          <span :class=\"getColor(index,'D',item.question.answer)\">D</span>\r\n        </div>\r\n        <div v-else class=\"Danswer\">\r\n          <el-input :rows=\"3\" type=\"textarea\" disabled :placeholder=\"getDAnswer(index)\"/>\r\n          <div class=\"putScore\">\r\n            <span>评分：</span>\r\n            <el-input-number :step=\"10\" v-model=\"paper.eachScore[index]\" :min=\"0\" :max=\"item.score\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"subPaper\">\r\n      <el-button class=\"button\" type=\"primary\" @click=\"subPaper(paper.detail.testPaperId)\">提交</el-button>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\nimport { onMounted, reactive } from 'vue'\r\nimport axios from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst id = route.params.id\r\nconst paper = reactive({\r\n  studentId: localStorage.getItem('teacherid'),\r\n  detail: [],\r\n  answers: [],\r\n  eachScore: []\r\n})\r\nonMounted(() => {\r\n  getPaperDetail(id)\r\n  console.log(paper)\r\n})\r\nconst getPaperDetail = (id) => {\r\n  axios.get(`http://localhost/answerPaper/one?id=${id}`\r\n  ).then(res => {\r\n    console.log(res.data)\r\n    paper.detail = res.data.data\r\n    getAnswer(res.data.data.content)\r\n    getScore(res.data.data.eachScore)\r\n  })\r\n}\r\nconst getAnswer = (content) => {\r\n  paper.answers = content.split('@#')\r\n  console.log(paper.answers)\r\n}\r\nconst getScore = (str) => {\r\n  const arr = str.split('@')\r\n  paper.eachScore = arr\r\n}\r\nconst getDAnswer = (index) => {\r\n  const str = paper.answers[index].slice(1)\r\n  return str\r\n}\r\nconst getColor = (index, option, answer) => {\r\n  if (paper.answers[index] === option) {\r\n    if (paper.answers[index] === answer) {\r\n      return 'color-green'\r\n    } else {\r\n      return 'color-red'\r\n    }\r\n  } else {\r\n    if (option === answer) {\r\n      return 'color-green'\r\n    } else {\r\n      return 'color-nomal'\r\n    }\r\n  }\r\n}\r\nconst subPaper = (id) => {\r\n  let totalScore = 0\r\n  paper.eachScore.forEach(e => {\r\n    totalScore += parseInt(e)\r\n  })\r\n  const str = paper.eachScore.join('@')\r\n  axios.post('http://localhost/answerPaper/score', {\r\n    id: paper.detail.id,\r\n    eachScore: str,\r\n    totalScore: totalScore\r\n  }).then(res => {\r\n    console.log(res)\r\n    ElMessage.success('提交成功')\r\n    router.push({\r\n      name: 'StuPaperManage',\r\n      params: {\r\n        id: id\r\n      }\r\n    })\r\n  })\r\n}\r\nconst backPaper = (id) => {\r\n  router.push({\r\n    name: 'StuPaperManage',\r\n    params: {\r\n      id: id\r\n    }\r\n  })\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n.box-card {\r\n  margin: 0 auto;\r\n  width: 80%;\r\n  // height: 700px;\r\n  .subPaper {\r\n    margin-left: 48%;\r\n  }\r\n  .card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .paperTitle {\r\n      font-size: 25px;\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n  .question {\r\n    border-top: 1px solid rgb(218, 207, 207);\r\n    width: 90%;\r\n    margin-left: 5%;\r\n    margin-top: 10px;\r\n    padding: 20px;\r\n    .content {\r\n      margin: 5px 0;\r\n    }\r\n    .answer {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      margin-left: 10px;\r\n      margin-top: 10px;\r\n      .showSelect span {\r\n        margin: 0 30px 0 0;\r\n        font-size: 20px;\r\n      }\r\n      .Danswer {\r\n        width: 100%;\r\n        .putScore {\r\n          margin-top: 4px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.color-red {\r\n  color: red;\r\n}\r\n.color-green {\r\n  color: green;\r\n}\r\n.color-nomal {\r\n  color: rgb(203, 200, 200);\r\n}\r\n</style>\r\n","import script from \"./paper.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./paper.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./paper.vue?vue&type=style&index=0&id=3d242a64&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML\\\\examination_system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3d242a64\"]])\n\nexport default __exports__"],"sourceRoot":""}