{"version":3,"sources":["webpack:///./src/views/Student/course/course.vue","webpack:///./src/views/Student/course/course.vue?7401"],"names":["dialogFormVisible","ref","formLabelWidth","stu","reactive","studentId","localStorage","getItem","courseList","codes","code","onMounted","iniCourse","console","log","axios","get","then","res","data","records","getCourse","ElMessage","error","addCourse","id","value","success","push","catch","err","courseId","post","__exports__"],"mappings":"yVA8BA,MAAMA,EAAoBC,kBAAI,GACxBC,EAAiB,OAEjBC,EAAMC,sBAAS,CACnBC,UAAWC,aAAaC,QAAQ,aAChCC,WAAY,KAERC,EAAQL,sBAAS,CACrBM,KAAM,KAERC,uBAAU,KACRC,IACAC,QAAQC,IAAIX,KAKd,MAAMS,EAAY,KAChBG,IAAMC,IAAK,qDAAoDb,EAAIE,gCACjEY,KAAKC,IACLf,EAAIK,WAAaU,EAAIC,KAAKA,KAAKC,UAEjCP,QAAQC,IAAIX,EAAIK,aAEZa,EAAaX,IACJ,KAATA,EACFY,OAAUC,MAAM,UAEhBR,IAAMC,IAAK,iCAAgCN,GACzCO,KAAKC,IACLM,EAAUN,EAAIC,KAAKA,KAAKM,GAAItB,EAAIE,WAChCL,EAAkB0B,OAAQ,EAC1BJ,OAAUK,QAAQ,QAClBxB,EAAIK,WAAWoB,KAAKV,EAAIC,KAAKA,QAC5BU,MAAMC,IACPjB,QAAQC,IAAIgB,MAIZN,EAAY,CAACO,EAAU1B,KAC3BU,IAAMiB,KAAK,mCAAoC,CAC7CD,SAAUA,EACV1B,UAAWA,IACVY,KAAKC,IACNL,QAAQC,IAAII,KACXW,MAAMC,IACPjB,QAAQC,IAAIgB,M,mtDCzEhB,MAAMG,EAAc,EAEL","file":"js/chunk-2d0b97b5.76dc03c6.js","sourcesContent":["<template>\r\n  <el-table :data=\"stu.courseList\" style=\"width: 100%\">\r\n    <el-table-column prop=\"code\" label=\"课程码\" />\r\n    <el-table-column prop=\"name\" label=\"课程名\" />\r\n    <el-table-column prop=\"introduce\" label=\"课程介绍\" />\r\n    <el-table-column prop=\"teacherName\" label=\"课程教师\" />\r\n  </el-table>\r\n  <el-button class=\"mt-4\" style=\"width: 100%\" @click=\"dialogFormVisible = true\"\r\n    >加入课程</el-button\r\n  >\r\n  <el-dialog v-model=\"dialogFormVisible\" title=\"加入课程\" width=\"30%\">\r\n    <el-form :model=\"codes\">\r\n      <el-form-item label=\"课程码\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"codes.code\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"getCourse(codes.code)\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script setup>\r\nimport { onMounted, reactive, ref } from 'vue'\r\nimport axios from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nconst dialogFormVisible = ref(false)\r\nconst formLabelWidth = '80px'\r\n\r\nconst stu = reactive({\r\n  studentId: localStorage.getItem('studentid'),\r\n  courseList: []\r\n})\r\nconst codes = reactive({\r\n  code: ''\r\n})\r\nonMounted(() => {\r\n  iniCourse()\r\n  console.log(stu)\r\n})\r\n// onUpdated(() => {\r\n//   localStorage.setItem('courseList', JSON.stringify(stu.courseList))\r\n// })\r\nconst iniCourse = () => {\r\n  axios.get(`http://localhost/courseSelection/course?studentId=${stu.studentId}&page=1&pageSize=10`\r\n  ).then(res => {\r\n    stu.courseList = res.data.data.records\r\n  })\r\n  console.log(stu.courseList)\r\n}\r\nconst getCourse = (code) => {\r\n  if (code === '') {\r\n    ElMessage.error('输入不能为空')\r\n  } else {\r\n    axios.get(`http://localhost/course/?code=${code}`\r\n    ).then(res => {\r\n      addCourse(res.data.data.id, stu.studentId)\r\n      dialogFormVisible.value = false\r\n      ElMessage.success('加入成功')\r\n      stu.courseList.push(res.data.data)\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\nconst addCourse = (courseId, studentId) => {\r\n  axios.post('http://localhost/courseSelection', {\r\n    courseId: courseId,\r\n    studentId: studentId\r\n  }).then(res => {\r\n    console.log(res)\r\n  }).catch(err => {\r\n    console.log(err)\r\n  })\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n</style>\r\n","import script from \"./course.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./course.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}