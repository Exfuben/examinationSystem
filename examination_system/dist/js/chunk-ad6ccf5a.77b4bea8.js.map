{"version":3,"sources":["webpack:///./src/views/Teather/paperManage/papers.vue","webpack:///./src/views/Teather/paperManage/papers.vue?2a0d","webpack:///./src/views/Teather/paperManage/papers.vue?a7c3"],"names":["dialogFormVisible","ref","router","useRouter","formLabelWidth","form","reactive","tableData","title","time","courseId","num","paperQuestionList","score","onMounted","getCourse","console","log","tea","id","localStorage","getItem","courses","papers","titles","axios","url","method","params","page","pageSize","teacherId","then","res","data","records","forEach","e","getPapers","getQuestion","questionBankId","get","total","push","subPaper","inipaperQuestionList","post","startTime","stopTime","ElMessage","success","value","iniScore","len","length","i","questionId","delPaper","index","delete","splice","getAnserPapers","name","handleSelectionChange","val","__exports__"],"mappings":"gvBA6EA,MAAMA,EAAoBC,kBAAI,GACxBC,EAASC,iBAETC,EAAiB,OACjBC,EAAOC,sBAAS,CACpBC,UAAW,GACXC,MAAO,GACPC,KAAM,GACNC,SAAU,GACVC,IAAK,GACLC,kBAAmB,GACnBC,MAAO,KAETC,uBAAU,KACRC,IACAC,QAAQC,IAAIC,KAEd,MAAMA,EAAMZ,sBAAS,CACnBa,GAAIC,aAAaC,QAAQ,aACzBC,QAAS,GACTC,OAAQ,GACRC,OAAQ,KAEJT,EAAY,KAChBU,IAAM,CACJC,IAAK,+BACLC,OAAQ,MACRC,OAAQ,CACNC,KAAM,EACNC,SAAU,GACVC,UAAWb,EAAIC,MAEhBa,KAAKC,IACNf,EAAII,QAAUW,EAAIC,KAAKA,KAAKC,QAC5BjB,EAAII,QAAQc,QAAQC,IAClBC,EAAUD,EAAElB,IACZoB,EAAYF,EAAEG,qBAIdF,EAAanB,IACjBM,IAAMgB,IAAK,+DAA8DtB,GACvEa,KAAKC,IACDA,EAAIC,KAAKA,KAAKQ,MAAQ,GACxBxB,EAAIK,OAAOoB,KAAKV,EAAIC,KAAKA,KAAKC,YAI9BI,EAAepB,IACnBM,IAAM,CACJC,IAAK,iCACLC,OAAQ,MACRC,OAAQ,CACNC,KAAM,EACNC,SAAU,GACVU,eAAgBrB,KAEjBa,KAAKC,IACNf,EAAIM,OAAOmB,KAAKV,EAAIC,KAAKA,KAAKC,YAG5BS,EAAW,KACfC,IACApB,IAAMqB,KAAK,6BAA8B,CACvCpC,SAAUL,EAAKK,SACfF,MAAOH,EAAKG,MACZuC,UAAW1C,EAAKI,KAAK,GACrBuC,SAAU3C,EAAKI,KAAK,GACpBG,kBAAmBP,EAAKO,oBACvBoB,KAAKC,IACNgB,OAAUC,QAAQjB,EAAIC,KAAKA,QAE7BlC,EAAkBmD,OAAQ,GAEtBC,EAAW,KACf/C,EAAKM,IAAIyB,QAAQC,IACL,KAANA,GACFhC,EAAKQ,MAAM8B,KAAKN,MAIhBQ,EAAuB,KAC3BO,IACA,MAAMC,EAAMhD,EAAKQ,MAAMyC,OACvB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKE,IACvBlD,EAAKO,kBAAkB+B,KAAK,CAC1Ba,WAAYnD,EAAKE,UAAUgD,GAAGpC,GAC9BN,MAAOR,EAAKQ,MAAM0C,MAIlBE,EAAW,CAACtC,EAAIuC,KACpBjC,IAAMkC,OAAQ,iCAAgCxC,GAC5Ca,KAAKC,IACLjB,QAAQC,IAAIgB,GACZf,EAAIK,OAAO,GAAGqC,OAAOF,EAAO,GAC5BT,OAAUC,QAAQ,UAEpBlC,QAAQC,IAAIE,IAER0C,EAAiB,CAAC1C,EAAIX,KAC1BN,EAAOyC,KAAK,CACVmB,KAAM,iBACNlC,OAAQ,CACNT,GAAIA,EACJX,MAAOA,MAIPuD,EAAyBC,IAC7B3D,EAAKE,UAAYyD,G,u+HCrLnB,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB,kCCRf,W","file":"js/chunk-ad6ccf5a.77b4bea8.js","sourcesContent":["<template>\r\n  <div class=\"paper-form\">\r\n    <div class=\"paper\" v-for=\"(item, index) in tea.papers[0]\" :key=\"index\">\r\n      <span class=\"delete\" @click=\"delPaper(item.id, index)\">X</span>\r\n      <div class=\"paperTitle\">{{ item.title }}</div>\r\n      <!-- <div class=\"paperCourse\">{{ item.courseName }}</div> -->\r\n      <div class=\"paperTime\">考试时间</div>\r\n      <div class=\"startTime\">{{ item.startTime }}</div>\r\n      <span>|</span>\r\n      <div class=\"stopTime\">{{ item.stopTime }}</div>\r\n      <el-button type=\"primary\" plain class=\"paperBtn\" @click=\"getAnserPapers(item.id, item.title)\">\r\n        答题详情\r\n      </el-button>\r\n    </div>\r\n    <div class=\"paper make-paper\">\r\n      <el-button type=\"primary\" plain @click=\"dialogFormVisible = true\">组卷</el-button>\r\n    </div>\r\n  </div>\r\n  <el-dialog v-model=\"dialogFormVisible\" title=\"组卷\" width=\"70%\">\r\n    <el-form :model=\"form\">\r\n      <el-form-item label=\"试卷标题\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"form.title\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"发布课程\" :label-width=\"formLabelWidth\">\r\n        <el-select v-model=\"form.courseId\" class=\"m-2\" placeholder=\"Select\">\r\n          <el-option\r\n            v-for=\"item in tea.courses\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"考试时间\" :label-width=\"formLabelWidth\">\r\n        <el-date-picker\r\n          v-model=\"form.time\"\r\n          type=\"datetimerange\"\r\n          range-separator=\"To\"\r\n          start-placeholder=\"Start date\"\r\n          end-placeholder=\"End date\"\r\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"题库题目\" :label-width=\"formLabelWidth\">\r\n        <el-table\r\n          ref=\"multipleTableRef\"\r\n          :data=\"tea.titles[0]\"\r\n          style=\"width: 100%\"\r\n          @selection-change=\"handleSelectionChange\"\r\n        >\r\n          <el-table-column type=\"selection\"/>\r\n          <el-table-column property=\"name\" label=\"题目\" width=\"70\"/>\r\n          <el-table-column property=\"type\" label=\"类型\" width=\"70\"/>\r\n          <el-table-column property=\"content\" label=\"内容\" width=\"550\"/>\r\n          <el-table-column label=\"分数\">\r\n            <template #default=\"scope\">\r\n              <el-input-number :step=\"10\" v-model=\"form.num[scope.$index]\" :min=\"1\" :max=\"100\" />\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"subPaper()\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script setup>\r\nimport { onMounted, ref, reactive } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nconst dialogFormVisible = ref(false)\r\nconst router = useRouter()\r\n\r\nconst formLabelWidth = '80px'\r\nconst form = reactive({\r\n  tableData: '',\r\n  title: '',\r\n  time: '',\r\n  courseId: '',\r\n  num: [],\r\n  paperQuestionList: [],\r\n  score: []\r\n})\r\nonMounted(() => {\r\n  getCourse()\r\n  console.log(tea)\r\n})\r\nconst tea = reactive({\r\n  id: localStorage.getItem('teacherid'),\r\n  courses: [],\r\n  papers: [],\r\n  titles: []\r\n})\r\nconst getCourse = () => {\r\n  axios({\r\n    url: 'http://localhost/course/page',\r\n    method: 'get',\r\n    params: {\r\n      page: 1,\r\n      pageSize: 50,\r\n      teacherId: tea.id\r\n    }\r\n  }).then(res => {\r\n    tea.courses = res.data.data.records\r\n    tea.courses.forEach(e => {\r\n      getPapers(e.id)\r\n      getQuestion(e.questionBankId)\r\n    })\r\n  })\r\n}\r\nconst getPapers = (id) => {\r\n  axios.get(`http://localhost/testPaper/page?page=1&pageSize=20&courseId=${id}`\r\n  ).then(res => {\r\n    if (res.data.data.total > 0) {\r\n      tea.papers.push(res.data.data.records)\r\n    }\r\n  })\r\n}\r\nconst getQuestion = (id) => {\r\n  axios({\r\n    url: 'http://localhost/question/page',\r\n    method: 'get',\r\n    params: {\r\n      page: 1,\r\n      pageSize: 50,\r\n      questionBankId: id\r\n    }\r\n  }).then(res => {\r\n    tea.titles.push(res.data.data.records)\r\n  })\r\n}\r\nconst subPaper = () => {\r\n  inipaperQuestionList()\r\n  axios.post('http://localhost/testPaper', {\r\n    courseId: form.courseId,\r\n    title: form.title,\r\n    startTime: form.time[0],\r\n    stopTime: form.time[1],\r\n    paperQuestionList: form.paperQuestionList\r\n  }).then(res => {\r\n    ElMessage.success(res.data.data)\r\n  })\r\n  dialogFormVisible.value = false\r\n}\r\nconst iniScore = () => {\r\n  form.num.forEach(e => {\r\n    if (e !== '') {\r\n      form.score.push(e)\r\n    }\r\n  })\r\n}\r\nconst inipaperQuestionList = () => {\r\n  iniScore()\r\n  const len = form.score.length\r\n  for (let i = 0; i < len; i++) {\r\n    form.paperQuestionList.push({\r\n      questionId: form.tableData[i].id,\r\n      score: form.score[i]\r\n    })\r\n  }\r\n}\r\nconst delPaper = (id, index) => {\r\n  axios.delete(`http://localhost/testPaper?id=${id}`\r\n  ).then(res => {\r\n    console.log(res)\r\n    tea.papers[0].splice(index, 1)\r\n    ElMessage.success('删除成功')\r\n  })\r\n  console.log(id)\r\n}\r\nconst getAnserPapers = (id, title) => {\r\n  router.push({\r\n    name: 'StuPaperManage',\r\n    params: {\r\n      id: id,\r\n      title: title\r\n    }\r\n  })\r\n}\r\nconst handleSelectionChange = (val) => {\r\n  form.tableData = val\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n.paper-form {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  .paper {\r\n    position: relative;\r\n    flex: 1;\r\n    text-align: center;\r\n    margin: 17px;\r\n    border: 1px solid #888;\r\n    box-sizing: border-box;\r\n    width: 210px;\r\n    min-width: 210px;\r\n    max-width: 210px;\r\n    height: 260px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    box-shadow: 0 3px 5px gray;\r\n    &:nth-child(5n + 5) {\r\n      margin-right: 0;\r\n    }\r\n    transition: all 0.4s;\r\n    .paperTitle {\r\n        font-size: 30px;\r\n    }\r\n    .startTime {\r\n        margin-bottom: -20px;\r\n    }\r\n    .stopTime {\r\n        margin-top: -20px;\r\n    }\r\n    .delete {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 2px;\r\n      cursor: pointer;\r\n      color: gray;\r\n    }\r\n  }\r\n  .paper:hover {\r\n    transform: scale(1.1);\r\n  }\r\n  .make-paper {\r\n    border: dashed 1px gray\r\n  }\r\n}\r\n</style>\r\n","import script from \"./papers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./papers.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./papers.vue?vue&type=style&index=0&id=49a363dc&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML\\\\examination_system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-49a363dc\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./papers.vue?vue&type=style&index=0&id=49a363dc&lang=less&scoped=true\""],"sourceRoot":""}