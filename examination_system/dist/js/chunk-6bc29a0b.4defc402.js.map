{"version":3,"sources":["webpack:///./src/views/Teather/quesManage/questions.vue?a38e","webpack:///./src/views/Teather/quesManage/questions.vue","webpack:///./src/views/Teather/quesManage/questions.vue?c5de"],"names":["dialogFormVisible","ref","updateKey","questionBank","reactive","tabs","options","value","label","bank","titles","title","teacherId","localStorage","getItem","name","questionBankId","type","content","answer","onMounted","getBank","console","log","axios","get","then","res","data","forEach","e","getQuestion","id","url","method","params","page","pageSize","push","records","openForm","addQuestion","post","ElMessage","success","handleDelete","index","delete","splice","handleClick","tab","__exports__"],"mappings":"kHAAA,W,2hBCmEA,MAAMA,EAAoBC,kBAAI,GACxBC,EAAYD,iBAAI,GAChBE,EAAeC,sBAAS,CAC5BC,KAAM,GACNC,QAAS,CAAC,CACRC,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAETC,KAAM,GACNC,OAAQ,GACRC,MAAO,CACLC,UAAWC,aAAaC,QAAQ,aAChCC,KAAM,GACNC,eAAgB,GAChBC,KAAM,GACNC,QAAS,GACTC,OAAQ,MAGZC,uBAAU,KACRC,IACAC,QAAQC,IAAIpB,KAEd,MAAMkB,EAAU,KACdG,IAAMC,IAAI,iCACRC,KAAKC,IACLxB,EAAaM,KAAOkB,EAAIC,KAAKA,KAC7BzB,EAAaM,KAAKoB,QAAQC,IACxBC,EAAYD,EAAEE,SAIdD,EAAeC,IACnBR,IAAM,CACJS,IAAK,iCACLC,OAAQ,MACRC,OAAQ,CACNC,KAAM,EACNC,SAAU,GACVrB,eAAgBgB,KAEjBN,KAAKC,IACNxB,EAAaO,OAAO4B,KAAKX,EAAIC,KAAKA,KAAKW,YAGrCC,EAAYR,IAChB7B,EAAaQ,MAAMK,eAAiBgB,EACpChC,EAAkBO,OAAQ,GAEtBkC,EAAc,KAClBnB,QAAQC,IAAIpB,GACZqB,IAAMkB,KAAK,4BAA6B,CACtC9B,UAAWT,EAAaQ,MAAMC,UAC9BG,KAAMZ,EAAaQ,MAAMI,KACzBC,eAAgBb,EAAaQ,MAAMK,eACnCC,KAAMd,EAAaQ,MAAMM,KACzBC,QAASf,EAAaQ,MAAMO,QAC5BC,OAAQhB,EAAaQ,MAAMQ,SAC1BO,KAAKC,IACNgB,OAAUC,QAAQ,QAClBtB,QAAQC,IAAII,GACZxB,EAAaO,OAAOP,EAAaE,MAAMiC,KAAKX,EAAIC,KAAKA,MACrD1B,EAAUK,OAAS,IAErBP,EAAkBO,OAAQ,GAEtBsC,EAAe,CAACb,EAAIc,KACxBtB,IAAMuB,OAAQ,gCAA+Bf,GAC3CN,KAAKC,IACLgB,OAAUC,QAAQ,QAClBzC,EAAaO,OAAOP,EAAaE,MAAM2C,OAAOF,EAAO,GACrDxB,QAAQC,IAAII,MAGVsB,EAAeC,IACnB/C,EAAaE,KAAO6C,EAAIJ,MACxBxB,QAAQC,IAAIpB,EAAaE,O,wtHC7I3B,MAAM8C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD","file":"js/chunk-6bc29a0b.4defc402.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./questions.vue?vue&type=style&index=0&id=a12056f2&lang=less&scoped=true\"","<template>\r\n  <div class=\"bankHead\">\r\n    <span>题库</span>\r\n  </div>\r\n  <el-tabs tab-position=\"left\" class=\"demo-tabs\" @tab-click=\"handleClick\">\r\n    <el-tab-pane v-for=\"(item, index) in questionBank.bank\" :key=\"index\" :label=\"item.name\">\r\n      <el-table :data=\"questionBank.titles[index]\" :key=\"updateKey\" stripe style=\"width: 100%\">\r\n        <el-table-column prop=\"name\" label=\"题目\" />\r\n        <el-table-column prop=\"content\" label=\"内容\" width=\"600\"/>\r\n        <el-table-column prop=\"type\" label=\"类型\" />\r\n        <el-table-column prop=\"answer\" label=\"答案\" />\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              size=\"small\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.row.id, scope.$index)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-button class=\"mt-4\" style=\"width: 100%\" @click=\"openForm(item.id)\"\r\n        >添加题目</el-button\r\n      >\r\n    </el-tab-pane>\r\n  </el-tabs>\r\n  <el-dialog v-model=\"dialogFormVisible\" title=\"添加题目\" width=\"50%\">\r\n    <el-form :model=\"questionBank.title\">\r\n      <el-form-item label=\"题目\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"questionBank.title.name\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"内容\" :label-width=\"formLabelWidth\">\r\n        <el-input\r\n          v-model=\"questionBank.title.content\"\r\n          :rows=\"3\"\r\n          type=\"textarea\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"类型\" :label-width=\"formLabelWidth\">\r\n        <el-select v-model=\"questionBank.title.type\" class=\"m-2\">\r\n          <el-option\r\n            v-for=\"item in questionBank.options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"答案\" :label-width=\"formLabelWidth\">\r\n        <el-input v-model=\"questionBank.title.answer\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"addQuestion()\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script setup>\r\nimport { onMounted, reactive, ref } from 'vue'\r\nimport axios from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nconst dialogFormVisible = ref(false)\r\nconst updateKey = ref(0)\r\nconst questionBank = reactive({\r\n  tabs: '',\r\n  options: [{\r\n    value: '0',\r\n    label: '选择题'\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '大题'\r\n  }],\r\n  bank: [],\r\n  titles: [],\r\n  title: {\r\n    teacherId: localStorage.getItem('teacherid'),\r\n    name: '',\r\n    questionBankId: '',\r\n    type: '',\r\n    content: '',\r\n    answer: ''\r\n  }\r\n})\r\nonMounted(() => {\r\n  getBank()\r\n  console.log(questionBank)\r\n})\r\nconst getBank = () => {\r\n  axios.get('http://localhost/questionBank'\r\n  ).then(res => {\r\n    questionBank.bank = res.data.data\r\n    questionBank.bank.forEach(e => {\r\n      getQuestion(e.id)\r\n    })\r\n  })\r\n}\r\nconst getQuestion = (id) => {\r\n  axios({\r\n    url: 'http://localhost/question/page',\r\n    method: 'get',\r\n    params: {\r\n      page: 1,\r\n      pageSize: 50,\r\n      questionBankId: id\r\n    }\r\n  }).then(res => {\r\n    questionBank.titles.push(res.data.data.records)\r\n  })\r\n}\r\nconst openForm = (id) => {\r\n  questionBank.title.questionBankId = id\r\n  dialogFormVisible.value = true\r\n}\r\nconst addQuestion = () => {\r\n  console.log(questionBank)\r\n  axios.post('http://localhost/question', {\r\n    teacherId: questionBank.title.teacherId,\r\n    name: questionBank.title.name,\r\n    questionBankId: questionBank.title.questionBankId,\r\n    type: questionBank.title.type,\r\n    content: questionBank.title.content,\r\n    answer: questionBank.title.answer\r\n  }).then(res => {\r\n    ElMessage.success('添加成功')\r\n    console.log(res)\r\n    questionBank.titles[questionBank.tabs].push(res.data.data)\r\n    updateKey.value += 1\r\n  })\r\n  dialogFormVisible.value = false\r\n}\r\nconst handleDelete = (id, index) => {\r\n  axios.delete(`http://localhost/question?id=${id}`\r\n  ).then(res => {\r\n    ElMessage.success('删除成功')\r\n    questionBank.titles[questionBank.tabs].splice(index, 1)\r\n    console.log(res)\r\n  })\r\n}\r\nconst handleClick = (tab) => {\r\n  questionBank.tabs = tab.index\r\n  console.log(questionBank.tabs)\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n.bankHead {\r\n  margin: 10px;\r\n  margin-left: 20px;\r\n}\r\n</style>\r\n","import script from \"./questions.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./questions.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./questions.vue?vue&type=style&index=0&id=a12056f2&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML\\\\examination_system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a12056f2\"]])\n\nexport default __exports__"],"sourceRoot":""}